<%- include('../partials/mainhead') %>

    <body>
        <div class="container-scroller">
            <!-- partial:../admin_files/partials/_navbar.html -->
            <%- include('../partials/navbar') %>
                <!-- partial -->
                <div class="container-fluid page-body-wrapper">
                    <!-- partial:../admin_files/partials/_settings-panel.html -->
                    <div class="theme-setting-wrapper">
                        <div id="settings-trigger"><i class="ti-settings"></i></div>
                        <div id="theme-settings" class="settings-panel">
                            <i class="settings-close ti-close"></i>
                            <p class="settings-heading">SIDEBAR SKINS</p>
                            <div class="sidebar-bg-options selected" id="sidebar-light-theme">
                                <div class="img-ss rounded-circle bg-light border mr-3"></div>Light
                            </div>
                            <div class="sidebar-bg-options" id="sidebar-dark-theme">
                                <div class="img-ss rounded-circle bg-dark border mr-3"></div>Dark
                            </div>
                            <p class="settings-heading mt-2">HEADER SKINS</p>
                            <div class="color-tiles mx-0 px-4">
                                <div class="tiles success"></div>
                                <div class="tiles warning"></div>
                                <div class="tiles danger"></div>
                                <div class="tiles info"></div>
                                <div class="tiles dark"></div>
                                <div class="tiles default"></div>
                            </div>
                        </div>
                    </div>
                    <div id="right-sidebar" class="settings-panel">
                        <i class="settings-close ti-close"></i>
                        <ul class="nav nav-tabs border-top" id="setting-panel" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="todo-tab" data-toggle="tab" href="#todo-section"
                                    role="tab" aria-controls="todo-section" aria-expanded="true">TO DO LIST</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="chats-tab" data-toggle="tab" href="#chats-section" role="tab"
                                    aria-controls="chats-section">CHATS</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="setting-content">
                            <div class="tab-pane fade show active scroll-wrapper" id="todo-section" role="tabpanel"
                                aria-labelledby="todo-section">
                                <div class="add-items d-flex px-3 mb-0">
                                </div>
                                <div class="list-wrapper px-3">
                                    <ul class="d-flex flex-column-reverse todo-list">
                                        <li>
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input class="checkbox" type="checkbox">
                                                    Team review meeting at 3.00 PM
                                                </label>
                                            </div>
                                            <i class="remove ti-close"></i>
                                        </li>
                                        <li>
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input class="checkbox" type="checkbox">
                                                    Prepare for presentation
                                                </label>
                                            </div>
                                            <i class="remove ti-close"></i>
                                        </li>
                                        <li>
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input class="checkbox" type="checkbox">
                                                    Resolve all the low priority tickets due today
                                                </label>
                                            </div>
                                            <i class="remove ti-close"></i>
                                        </li>
                                        <li class="completed">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input class="checkbox" type="checkbox" checked>
                                                    Schedule meeting for next week
                                                </label>
                                            </div>
                                            <i class="remove ti-close"></i>
                                        </li>
                                        <li class="completed">
                                            <div class="form-check">
                                                <label class="form-check-label">
                                                    <input class="checkbox" type="checkbox" checked>
                                                    Project review
                                                </label>
                                            </div>
                                            <i class="remove ti-close"></i>
                                        </li>
                                    </ul>
                                </div>
                                <h4 class="px-3 text-muted mt-5 font-weight-light mb-0">Events</h4>
                                <div class="events pt-4 px-3">
                                    <div class="wrapper d-flex mb-2">
                                        <i class="ti-control-record text-primary mr-2"></i>
                                        <span>Feb 11 2018</span>
                                    </div>
                                    <p class="mb-0 font-weight-thin text-gray">Creating component page build a js</p>
                                    <p class="text-gray mb-0">The total number of sessions</p>
                                </div>
                                <div class="events pt-4 px-3">
                                    <div class="wrapper d-flex mb-2">
                                        <i class="ti-control-record text-primary mr-2"></i>
                                        <span>Feb 7 2018</span>
                                    </div>
                                    <p class="mb-0 font-weight-thin text-gray">Meeting with Alisa</p>
                                    <p class="text-gray mb-0 ">Call Sarah Graves</p>
                                </div>
                            </div>
                            <!-- To do section tab ends -->
                            <div class="tab-pane fade" id="chats-section" role="tabpanel"
                                aria-labelledby="chats-section">
                                <div class="d-flex align-items-center justify-content-between border-bottom">
                                    <p class="settings-heading border-top-0 mb-3 pl-3 pt-0 border-bottom-0 pb-0">Friends
                                    </p>
                                    <small
                                        class="settings-heading border-top-0 mb-3 pt-0 border-bottom-0 pb-0 pr-3 font-weight-normal">See
                                        All</small>
                                </div>
                                <ul class="chat-list">
                                    <li class="list active">
                                        <div class="profile"><img src="../admin_files/images/faces/face1.jpg"
                                                alt="image"><span class="online"></span></div>
                                        <div class="info">
                                            <p>Thomas Douglas</p>
                                            <p>Available</p>
                                        </div>
                                        <small class="text-muted my-auto">19 min</small>
                                    </li>
                                    <li class="list">
                                        <div class="profile"><img src="../admin_files/images/faces/face2.jpg"
                                                alt="image"><span class="offline"></span></div>
                                        <div class="info">
                                            <div class="wrapper d-flex">
                                                <p>Catherine</p>
                                            </div>
                                            <p>Away</p>
                                        </div>
                                        <div class="badge badge-success badge-pill my-auto mx-2">4</div>
                                        <small class="text-muted my-auto">23 min</small>
                                    </li>
                                    <li class="list">
                                        <div class="profile"><img src="../admin_files/images/faces/face3.jpg"
                                                alt="image"><span class="online"></span></div>
                                        <div class="info">
                                            <p>Daniel Russell</p>
                                            <p>Available</p>
                                        </div>
                                        <small class="text-muted my-auto">14 min</small>
                                    </li>
                                    <li class="list">
                                        <div class="profile"><img src="../admin_files/images/faces/face4.jpg"
                                                alt="image"><span class="offline"></span></div>
                                        <div class="info">
                                            <p>James Richardson</p>
                                            <p>Away</p>
                                        </div>
                                        <small class="text-muted my-auto">2 min</small>
                                    </li>
                                    <li class="list">
                                        <div class="profile"><img src="../admin_files/images/faces/face5.jpg"
                                                alt="image"><span class="online"></span></div>
                                        <div class="info">
                                            <p>Madeline Kennedy</p>
                                            <p>Available</p>
                                        </div>
                                        <small class="text-muted my-auto">5 min</small>
                                    </li>
                                    <li class="list">
                                        <div class="profile"><img src="../admin_files/images/faces/face6.jpg"
                                                alt="image"><span class="online"></span></div>
                                        <div class="info">
                                            <p>Sarah Graves</p>
                                            <p>Available</p>
                                        </div>
                                        <small class="text-muted my-auto">47 min</small>
                                    </li>
                                </ul>
                            </div>
                            <!-- chat tab ends -->
                        </div>
                    </div>
                    <!-- partial -->
                    <!-- partial:../admin_files/partials/_sidebar.html -->
                    <%- include('../partials/sidebar') %>
                        <!-- partial -->
                        <div class="main-panel">
                            <div class="content-wrapper">
                                <div class="row">
                                    <div class="col-md-1">

                                    </div>
                                    <div class="col-md-8 grid-margin stretch-card">
                                        <div class="card">
                                            <div class="card-body">

                                                <h4 class="card-title">PRODUCT</h4>
                                                <%- include('../partials/flash') %>
                                                <h4 class="text-danger">
                                                    <%=message%>
                                                </h4>


                                                <form action="/products" enctype="multipart/form-data" method="POST">
                                                    <label class="mt-2">product name</label>
                                                    <input type="text" class="form-control mt-2"
                                                        placeholder="product name" name="product_name"
                                                        aria-label="product name" required />
                                                    <div class="row">
                                                        <div class="col-md-6">

                                                            <label class="mt-2" for="category">Choose a category</label>

                                                            <select class="form-control mt-2" placeholder="category"
                                                                name="category_id" id="category_id">plz select

                                                                <%for(value of category){ %>
                                                                    <option value="<%=value._id%>">
                                                                        <%=value.category%>
                                                                    </option>
                                                                    <%}%>

                                                            </select>
                                                        </div>
                                                        <div class="col-md-6 mt-2">
                                                            <label class="mt-2" for="category">Choose a
                                                                subcategory</label>
                                                            <div class="" id="subcategory">
                                                                <select id="subCategoryId" name="subcategory-id"
                                                                    class="form-control" disabled>
                                                                    <option value=" ">Choose..</option>
                                                                </select>
                                                            </div>
                                                            <!-- <label class="mt-2" for="category">Choose a
                                                                sub-category</label> -->

                                                        </div>
                                                    </div>
                                                    <label class="mt-2" for="Brand">Choose a brand</label>
                                                    <select class="form-control mt-2" placeholder="Brand"
                                                        name="brand_id" id="brand">

                                                        <% for(values of brand ){ %>
                                                            <option value="<%=values._id%>">
                                                                <%= values.brand%>
                                                            </option>
                                                            <% } %>

                                                    </select>
                                                    <label class="mt-2">product description</label>
                                                    <input type="text" class="form-control mt-2"
                                                        placeholder="product description" name="description"
                                                        aria-label="product description" required />

                                                    <label class="mt-2">product details</label>
                                                    <textarea rows="4" columns="2" class="form-control mt-2"
                                                        placeholder="product details" name="details"
                                                        aria-label="product details" required></textarea>
                                                    <div class="row">

                                                        <div class="col-md-4">
                                                            <label class="mt-2">small size</label>
                                                            <input type="text" class="form-control mt-2"
                                                                placeholder="product stock" name="small_stock"
                                                                aria-label="product stock" required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label class="mt-2">medium size</label>
                                                            <input type="text" class="form-control mt-2"
                                                                placeholder="product stock" name="medium_stock"
                                                                aria-label="product stock" required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label class="mt-2">large size</label>
                                                            <input type="text" class="form-control mt-2"
                                                                placeholder="product stock" name="large_stock"
                                                                aria-label="product stock" required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label class="mt-2">price</label>
                                                            <input type="text" class="form-control mt-2"
                                                                placeholder="price" name="price" aria-label="price"
                                                                required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label class="mt-2">mrp</label>
                                                            <input type="text" class="form-control mt-2"
                                                                placeholder="mrp" name="mrp" aria-label="mrp"
                                                                required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <label class="col-md-12 mt-4">product image</label>
                                                            <input class="col-md-12 mt-2" type="file" name="image"
                                                                class="primary" multiple />
                                                        </div>
                                                    </div>
                                                    <div class="text-danger">
                                                        <%=message%>
                                                    </div>
                                                    <input type="submit"
                                                        class="btn-blue btn-primary btn-md rounded mt-3 " type="submit">
                                                    </input>

                                                </form>


                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!-- content-wrapper ends -->
                            <!-- partial:../admin_files/partials/_footer.html -->
                            <footer class="footer">
                                <div class="d-sm-flex justify-content-center justify-content-sm-between">
                                    <span
                                        class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright
                                        ©
                                        2021.
                                        Premium <a href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin
                                            template</a> from BootstrapDash. All rights reserved.</span>
                                    <span
                                        class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted
                                        &
                                        made
                                        with <i class="ti-heart text-danger ml-1"></i></span>
                                </div>
                            </footer>
                            <!-- partial -->
                        </div>
                        <!-- main-panel ends -->
                </div>
                <!-- page-body-wrapper ends -->
        </div>
        <!-- container-scroller -->
        <!-- plugins:js -->
        <script>
            const category = document.getElementById("category_id");

            category.addEventListener("change", function () {
                let categoryId = category.value;

                const subCategoryField = document.getElementById('subcategory');
                let option = '';
                fetch('/products/fetch', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ categoryId })
                }).then(res => res.json()).then(data => {
                    let subCategory = data.subcategory;
                    if (subCategory.length > 0) {
                        option += `<select id="subCategoryId" name="subcategory_id" class="form-control">`;
                        subCategory.forEach((eachSubCategory) => {
                            option += `<option value="${eachSubCategory._id}">${eachSubCategory.subcategory}</option>`;
                        });
                        option += `</select>`;
                        subCategoryField.innerHTML = option;
                    } else {
                        subCategoryField.innerHTML = `<select id="subCategoryId" name="subcategory-id" class="form-control"><option value=" g">Choose..</option></select>`;
                    }

                })
            });
        </script>
        }
        <%- include('../partials/end') %>